(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{529:function(t,e,s){"use strict";s.r(e);var r=s(19),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("📖 "+t._s(t.$page.readingTime.text)+"    🔡 "+t._s(t.$page.readingTime.words)),s("br")])]),t._v(" "),s("h1",{attrs:{id:"git-prune-prune-all-unreachable-objects-from-the-object-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-prune-prune-all-unreachable-objects-from-the-object-database"}},[t._v("#")]),t._v(" 📌 git prune - Prune all unreachable objects from the object database")]),t._v(" "),s("h2",{attrs:{id:"progress"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#progress"}},[t._v("#")]),t._v(" 🔹 --progress")]),t._v(" "),s("p",[s("strong",[t._v("1. Usage scenario: How to reduce disk space usage in a large repository?")])]),t._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[t._v("💯Score: 1    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-commit.html"}},[t._v("git commit")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-rebase.html"}},[t._v("git rebase")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[t._v("git branch")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[t._v("git checkout")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-gc.html"}},[t._v("git gc")]),t._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/31424082",target:"_blank",rel:"noopener noreferrer"}},[t._v("Details"),s("OutboundLink")],1)],1)],1)]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/bin/bash")]),t._v("\ngit checkout --orphan temp $1\ngit commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Truncated history"')]),t._v("\ngit rebase --onto temp $1 master\ngit branch -D temp\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The following 2 commands are optional - they keep your git repo in good shape.")]),t._v("\ngit prune --progress # delete all the objects w/o references\ngit gc --aggressive # aggressively collect garbage; may take a lot of time on large repos\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h2",{attrs:{id:"none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#none"}},[t._v("#")]),t._v(" 🔹None")]),t._v(" "),s("p",[s("strong",[t._v("1. Usage scenario: Garbage collect commits in git")])]),t._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[t._v("💯Score: 19    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[t._v("git repack")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[t._v("git reflog")]),t._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/14995269",target:"_blank",rel:"noopener noreferrer"}},[t._v("Details"),s("OutboundLink")],1)],1)],1)]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v("rm -rf .git/refs/original/*\ngit reflog expire --all --expire-unreachable=0\ngit repack -A -d\ngit prune\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[s("strong",[t._v("2. Usage scenario: How to delete incomplete pull files in git?")])]),t._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[t._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[t._v("git repack")]),t._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/51474993",target:"_blank",rel:"noopener noreferrer"}},[t._v("Details"),s("OutboundLink")],1)],1)],1)]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v("git repack -Ad\ngit prune\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("3. Usage scenario: Compact Git repository with history depth")])]),t._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[t._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-gc.html"}},[t._v("git gc")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[t._v("git repack")]),t._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/31785742",target:"_blank",rel:"noopener noreferrer"}},[t._v("Details"),s("OutboundLink")],1)],1)],1)]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v("git gc\ngit repack -Ad      # kills in-pack garbage\ngit prune           # kills loose garbage\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("strong",[t._v("4. Usage scenario: git move portion of old repository to a new repository")])]),t._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[t._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[t._v("git filter-branch")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-gc.html"}},[t._v("git gc")]),t._v(", "),s("RouterLink",{attrs:{to:"/richen/git-clean.html"}},[t._v("git clean")]),t._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/12976048",target:"_blank",rel:"noopener noreferrer"}},[t._v("Details"),s("OutboundLink")],1)],1)],1)]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v("git filter-branch --subdirectory-filter a -- --all\n\ngit clean -d -f  // Remove untracked files from the working tree\ngit gc --aggressive // Cleanup unnecessary files and optimize the local repository\ngit prune  // Prune all unreachable objects from the object database\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])])}),[],!1,null,null,null);e.default=a.exports}}]);