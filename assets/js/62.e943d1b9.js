(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{490:function(e,t,s){"use strict";s.r(t);var a=s(19),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("📖 "+e._s(e.$page.readingTime.text)+"    🔡 "+e._s(e.$page.readingTime.words)),s("br")])]),e._v(" "),s("h1",{attrs:{id:"git-gc-cleanup-unnecessary-files-and-optimize-the-local-repository"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-gc-cleanup-unnecessary-files-and-optimize-the-local-repository"}},[e._v("#")]),e._v(" 📌 git gc - Cleanup unnecessary files and optimize the local repository")]),e._v(" "),s("h2",{attrs:{id:"aggressive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aggressive"}},[e._v("#")]),e._v(" 🔹 --aggressive")]),e._v(" "),s("p",[s("strong",[e._v("1. Usage scenario: Reduce git repository size")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 407    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/2116892",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git reflog expire --all --expire=now\ngit gc --prune=now --aggressive\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[s("strong",[e._v("2. Usage scenario: Git: How to remove file from historical commit?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 183    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[e._v("git filter-branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-rm.html"}},[e._v("git rm")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/8741530",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git filter-branch --index-filter \\\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'git rm --cached --ignore-unmatch path/to/mylarge_50mb_file'")]),e._v(" \\\n    --tag-name-filter cat -- --all\n\nrm -Rf .git/refs/original       # careful\ngit gc --aggressive --prune=now # danger\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[s("strong",[e._v("3. Usage scenario: How to REALLY delete a git branch (i.e. remove all of its objects/commits)?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 27    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[e._v("git repack")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/4457436",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git reflog expire --expire=now --all\ngit gc --aggressive --prune=now\ngit repack -a -d -l\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[s("strong",[e._v("4. Usage scenario: Removing git repository objects entirely from all branches and tags and pushing changes to remote")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 7    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-for-each-ref.html"}},[e._v("git for-each-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-update-index.html"}},[e._v("git update-index")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-config.html"}},[e._v("git config")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-update-ref.html"}},[e._v("git update-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[e._v("git filter-branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-rm.html"}},[e._v("git rm")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[e._v("git checkout")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-push.html"}},[e._v("git push")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/10633774",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Configure the repository to push all existing branches & tags")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# when none are explicitly specified")]),e._v("\ngit config --add remote.origin.push "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'+refs/tags/*:refs/tags/*'")]),e._v("\ngit config --add remote.origin.push "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'+refs/heads/*:refs/heads/*'")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Make sure all local branches exist, so they get filtered")]),e._v("\nfor remote_branch in `git branch --all | grep -v HEAD | sed -e "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s/\\*//'")]),e._v("`; do local_branch=`echo $remote_branch | sed -e "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s!remotes/origin/!!'")]),e._v("`; git checkout $local_branch; done\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Prevent git <1.7.7.1 from complaining about dirty working directory")]),e._v("\ngit update-index -q --ignore-submodules --refresh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Do the filtering across --all branches and rewrite tags")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Note that this will necessarily remove signatures on tags")]),e._v("\ngit filter-branch -f --tree-filter "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"git rm -rf --ignore-unmatch modules/custom/mymigration/data/photos/*"')]),e._v(" --tag-name-filter cat -- --all\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Remove the backed-up refs")]),e._v("\ngit for-each-ref --format="),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"%(refname)"')]),e._v(" refs/original/ | xargs -n 1 git update-ref -d\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Clear out the reflog and garbage-collect")]),e._v("\ngit reflog expire --expire=now --all\ngit gc --aggressive --prune=now\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Push all changes to origin - pushes tags and branches")]),e._v("\ngit push origin\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br")])]),s("p",[s("strong",[e._v("5. Usage scenario: Removing unwanted files from history including all refs with filter-branch")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 7    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/15924054",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#!/bin/bash")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#usage: ./remove_files.sh file_list.txt bare-repo-dir")]),e._v("\nwhile read file_hash file_to_remove\ndo\n    echo "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Removing "')]),e._v("$file_to_remove;\n    lastFile=`echo $file_to_remove | awk -F/ "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{print $NF}'")]),e._v("`;\n    java -jar bfg.jar --delete-files $lastFile $2;\ndone < $1\n\ncd $2;\ngit gc --prune=now --aggressive;\ncd ..;\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br")])]),s("p",[s("strong",[e._v("6. Usage scenario: git tree contains duplicate file entries")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 5    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[e._v("git checkout")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/10953414",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git checkout fe3254FIRSTCOMMITAFTERORIGIN/MASTER/HEAD . // note the dot at the end\n// without the dot, you move your head to the commit instead of the commit\n// to the working copy, and seems to bring the corrupt object into your good clone\n\ngit gc --aggressive --prune=now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[s("strong",[e._v("7. Usage scenario: Delete all commits not on master")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 4    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/57362655",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git branch | grep -v "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"master$"')]),e._v(" | xargs git branch -D \n\ngit gc --prune=now --aggressive\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[s("strong",[e._v("8. Usage scenario: Anonymous branch after doing git reset")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 4    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-prune.html"}},[e._v("git prune")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-fsck.html"}},[e._v("git fsck")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/2384708",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git fsck −−lost-found")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v(" $ git gc"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --aggressive")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v(" $ git prune")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("p",[s("strong",[e._v("9. Usage scenario: Delete file on git repository")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 3    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/21928058",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --prune=now --aggressive\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("10. Usage scenario: git move portion of old repository to a new repository")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[e._v("git filter-branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-prune.html"}},[e._v("git prune")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-clean.html"}},[e._v("git clean")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/12976048",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git filter-branch --subdirectory-filter a -- --all\n\ngit clean -d -f  // Remove untracked files from the working tree\ngit gc --aggressive // Cleanup unnecessary files and optimize the local repository\ngit prune  // Prune all unreachable objects from the object database\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[s("strong",[e._v("11. Usage scenario: Full local copy of remote git repository with all branches/tags")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-remote.html"}},[e._v("git remote")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-for-each-ref.html"}},[e._v("git for-each-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-tag.html"}},[e._v("git tag")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-clone.html"}},[e._v("git clone")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/51402520",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git clone --mirror <repo-url>\n\ngit remote remove origin\n\ngit branch -D unwanted-branch\ngit tag -D unwanted-tag\ngit gc --aggressive --prune=all\n\ngit for-each-ref\n\ngit clone --mirror file://localhost/path/to/first/clone\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("p",[s("strong",[e._v("12. Usage scenario: Download latest version of a specific GIT branch + no local repository")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-remote.html"}},[e._v("git remote")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-init.html"}},[e._v("git init")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reset.html"}},[e._v("git reset")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[e._v("git checkout")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-fetch.html"}},[e._v("git fetch")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/9703322",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git init build_dir\ncd build_dir\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# repeat for all repositories")]),e._v("\ngit remote add REPO_NAME GIT_REPO_URI\n\ngit fetch --all # fetch all updates\ngit fetch REPO_NAME # just fetch one repo\ngit checkout master\ngit reset --hard REPO_NAME/repository\n\ngit gc --aggressive\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("p",[s("strong",[e._v("13. Usage scenario: How to reduce disk space usage in a large repository?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-commit.html"}},[e._v("git commit")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-rebase.html"}},[e._v("git rebase")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[e._v("git checkout")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-prune.html"}},[e._v("git prune")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/31424082",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#!/bin/bash")]),e._v("\ngit checkout --orphan temp $1\ngit commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Truncated history"')]),e._v("\ngit rebase --onto temp $1 master\ngit branch -D temp\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The following 2 commands are optional - they keep your git repo in good shape.")]),e._v("\ngit prune --progress # delete all the objects w/o references\ngit gc --aggressive # aggressively collect garbage; may take a lot of time on large repos\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br")])]),s("p",[s("strong",[e._v("14. Usage scenario: Gitlab : Redusse the size of .git folder without losing all git history")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/42623324",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --aggressive --prune=now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h2",{attrs:{id:"prune"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prune"}},[e._v("#")]),e._v(" 🔹 --prune")]),e._v(" "),s("p",[s("strong",[e._v("1. Usage scenario: How do you remove an invalid remote branch reference from Git?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 789    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-remote.html"}},[e._v("git remote")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/1072178",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --prune=now\n\ngit remote prune public\n\ngit remote rm public \n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[s("strong",[e._v("2. Usage scenario: Reduce git repository size")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 407    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/2116892",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git reflog expire --all --expire=now\ngit gc --prune=now --aggressive\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[s("strong",[e._v("3. Usage scenario: Git: How to remove file from historical commit?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 183    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[e._v("git filter-branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-rm.html"}},[e._v("git rm")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/8741530",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git filter-branch --index-filter \\\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'git rm --cached --ignore-unmatch path/to/mylarge_50mb_file'")]),e._v(" \\\n    --tag-name-filter cat -- --all\n\nrm -Rf .git/refs/original       # careful\ngit gc --aggressive --prune=now # danger\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[s("strong",[e._v("4. Usage scenario: How to REALLY delete a git branch (i.e. remove all of its objects/commits)?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 27    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[e._v("git repack")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/4457436",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git reflog expire --expire=now --all\ngit gc --aggressive --prune=now\ngit repack -a -d -l\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[s("strong",[e._v("5. Usage scenario: How can I delete all commits before a given date in Git history?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 24    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-update-ref.html"}},[e._v("git update-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[e._v("git filter-branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/29043295",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git filter-branch --parent-filter '\n    read parent\n    if [ "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"$parent"')]),e._v(" = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"-p 5bdd44e5919cb0a95a9924817529cd7c980f88b5"')]),e._v(" ]\n    then\n        echo\n    else\n        echo "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"$parent"')]),e._v("\n    fi'\n\ngit update-ref -d refs/original/refs/heads/master\n\ngit reflog expire --expire-unreachable=all --all\ngit gc --prune=all\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br")])]),s("p",[s("strong",[e._v("6. Usage scenario: How to delete a blob from a Git repo")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 14    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/7201842",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --prune=<date> (for date you also can insert now)\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("7. Usage scenario: Removing git repository objects entirely from all branches and tags and pushing changes to remote")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 7    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-for-each-ref.html"}},[e._v("git for-each-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-update-index.html"}},[e._v("git update-index")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-config.html"}},[e._v("git config")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-update-ref.html"}},[e._v("git update-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-filter-branch.html"}},[e._v("git filter-branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-rm.html"}},[e._v("git rm")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[e._v("git checkout")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-push.html"}},[e._v("git push")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/10633774",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Configure the repository to push all existing branches & tags")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# when none are explicitly specified")]),e._v("\ngit config --add remote.origin.push "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'+refs/tags/*:refs/tags/*'")]),e._v("\ngit config --add remote.origin.push "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'+refs/heads/*:refs/heads/*'")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Make sure all local branches exist, so they get filtered")]),e._v("\nfor remote_branch in `git branch --all | grep -v HEAD | sed -e "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s/\\*//'")]),e._v("`; do local_branch=`echo $remote_branch | sed -e "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s!remotes/origin/!!'")]),e._v("`; git checkout $local_branch; done\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Prevent git <1.7.7.1 from complaining about dirty working directory")]),e._v("\ngit update-index -q --ignore-submodules --refresh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Do the filtering across --all branches and rewrite tags")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Note that this will necessarily remove signatures on tags")]),e._v("\ngit filter-branch -f --tree-filter "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"git rm -rf --ignore-unmatch modules/custom/mymigration/data/photos/*"')]),e._v(" --tag-name-filter cat -- --all\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Remove the backed-up refs")]),e._v("\ngit for-each-ref --format="),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"%(refname)"')]),e._v(" refs/original/ | xargs -n 1 git update-ref -d\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Clear out the reflog and garbage-collect")]),e._v("\ngit reflog expire --expire=now --all\ngit gc --aggressive --prune=now\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Push all changes to origin - pushes tags and branches")]),e._v("\ngit push origin\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br")])]),s("p",[s("strong",[e._v("8. Usage scenario: git large pack file, delete and rewrite?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 7    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[e._v("git repack")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-fsck.html"}},[e._v("git fsck")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/24693485",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# remove the temporary history git-filter-branch otherwise leaves behind for a long time")]),e._v("\nrm -rf .git/refs/original/ && git reflog expire --all &&  git gc --aggressive --prune=now\n\nrm -rf .git/refs/original/\ngit reflog expire --expire=now --all\ngit fsck --full --unreachable\ngit repack -A -d\ngit gc --aggressive --prune=now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("p",[s("strong",[e._v("9. Usage scenario: Removing unwanted files from history including all refs with filter-branch")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 7    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/15924054",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#!/bin/bash")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#usage: ./remove_files.sh file_list.txt bare-repo-dir")]),e._v("\nwhile read file_hash file_to_remove\ndo\n    echo "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Removing "')]),e._v("$file_to_remove;\n    lastFile=`echo $file_to_remove | awk -F/ "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{print $NF}'")]),e._v("`;\n    java -jar bfg.jar --delete-files $lastFile $2;\ndone < $1\n\ncd $2;\ngit gc --prune=now --aggressive;\ncd ..;\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br")])]),s("p",[s("strong",[e._v("10. Usage scenario: git tree contains duplicate file entries")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 5    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-checkout.html"}},[e._v("git checkout")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/10953414",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git checkout fe3254FIRSTCOMMITAFTERORIGIN/MASTER/HEAD . // note the dot at the end\n// without the dot, you move your head to the commit instead of the commit\n// to the working copy, and seems to bring the corrupt object into your good clone\n\ngit gc --aggressive --prune=now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[s("strong",[e._v("11. Usage scenario: How to delete a single git repository clone, without the rm -rf sledgehammer?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 4    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/43124773",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --prune=all\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("12. Usage scenario: Delete all commits not on master")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 4    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/57362655",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git branch | grep -v "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"master$"')]),e._v(" | xargs git branch -D \n\ngit gc --prune=now --aggressive\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[s("strong",[e._v("13. Usage scenario: Problem with git reset on rolling back to the previous commit")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 3    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/7187359",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --prune=now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("14. Usage scenario: Move directory from existing Git repository to a new repository maintaining history and minizing size")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-for-each-ref.html"}},[e._v("git for-each-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-tag.html"}},[e._v("git tag")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-update-ref.html"}},[e._v("git update-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/23515124",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git for-each-ref"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --format")]),e._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"%(refname)"')]),e._v(" refs/original/ | xargs -n 1 git update-ref -d\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git reflog expire"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --expire")]),e._v("=now"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --all")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git gc"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --prune")]),e._v("=now")]),e._v("\n$ du -sh .\n2.1M   .\n\n$ for t in $(git tag -l|xargs); do git tag -d $t; done\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br")])]),s("p",[s("strong",[e._v("15. Usage scenario: Creating a GIT project from specific commit of another GIT project")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-remote.html"}},[e._v("git remote")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reset.html"}},[e._v("git reset")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-reflog.html"}},[e._v("git reflog")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-fsck.html"}},[e._v("git fsck")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/25365301",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git reset"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --hard")]),e._v(" C6")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git branch"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" -D")]),e._v(" branch_name")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git fsck"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --no")]),e._v("-reflogs")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git reflog expire"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --expire")]),e._v("=now"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --all")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git gc"),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v(" --prune")]),e._v("=now")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git remote remove origin")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[s("strong",[e._v("16. Usage scenario: Full local copy of remote git repository with all branches/tags")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 2    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-remote.html"}},[e._v("git remote")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-for-each-ref.html"}},[e._v("git for-each-ref")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-tag.html"}},[e._v("git tag")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-branch.html"}},[e._v("git branch")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-clone.html"}},[e._v("git clone")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/51402520",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git clone --mirror <repo-url>\n\ngit remote remove origin\n\ngit branch -D unwanted-branch\ngit tag -D unwanted-tag\ngit gc --aggressive --prune=all\n\ngit for-each-ref\n\ngit clone --mirror file://localhost/path/to/first/clone\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("p",[s("strong",[e._v("17. Usage scenario: Remove Folder from bitbucket history")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/51761664",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v(" git gc --prune=now  //accepts date\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("18. Usage scenario: Gitlab : Redusse the size of .git folder without losing all git history")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/42623324",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc --aggressive --prune=now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h2",{attrs:{id:"none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#none"}},[e._v("#")]),e._v(" 🔹None")]),e._v(" "),s("p",[s("strong",[e._v("1. Usage scenario: Find size of Git repository")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 295    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-bundle.html"}},[e._v("git bundle")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/8185326",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git bundle create tmp.bundle --all\ndu -sh tmp.bundle\n\ngit gc\ndu -sh .git/\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[s("strong",[e._v("2. Usage scenario: Removing unwanted folders from git repo permanently - Repo size not changing")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 4    🔗Associated commands: [ "),s("RouterLink",{attrs:{to:"/richen/git-prune.html"}},[e._v("git prune")]),e._v(", "),s("RouterLink",{attrs:{to:"/richen/git-repack.html"}},[e._v("git repack")]),e._v(" ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/31309715",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)],1)],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc\ngit repack -Ad      # kills in-pack garbage\ngit prune           # kills loose garbage\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[s("strong",[e._v("3. Usage scenario: git how to remove untracked files from the pack file")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/44128934",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[e._v("git gc  \n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("strong",[e._v("4. Usage scenario: How do I to identify forced pushes in Git?")])]),e._v(" "),s("blockquote",[s("p",[s("font",{attrs:{size:"2"}},[e._v("💯Score: 1    🔗Associated commands: [ None ]    🌐"),s("a",{attrs:{href:"https://stackoverflow.com/questions/59585978",target:"_blank",rel:"noopener noreferrer"}},[e._v("Details"),s("OutboundLink")],1)])],1)]),e._v(" "),s("p",[s("strong",[e._v("Example:")])]),e._v(" "),s("div",{staticClass:"language-git line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[e._v("$ git gc")]),e._v("\nEnumerating objects: 15, done.\nCounting objects: 100% (15/15), done.\nDelta compression using up to 8 threads\nCompressing objects: 100% (5/5), done.\nWriting objects: 100% (15/15), done.\nBuilding bitmaps: 100% (5/5), done.\nTotal 15 (delta 0), reused 0 (delta 0)\nComputing commit graph generation numbers: 100% (5/5), done.\n\n$ find objects -type f\nobjects/02/5f398bbc061f1fa0b61f8454f5d134f43a8a4c\nobjects/b4/036885119a0c0a726d4a07c39880f5d4e5d688\nobjects/pack/pack-57c98c590b41d20da1b6892ce4a18ab735272583.pack\nobjects/pack/pack-57c98c590b41d20da1b6892ce4a18ab735272583.bitmap\nobjects/pack/pack-57c98c590b41d20da1b6892ce4a18ab735272583.idx\nobjects/info/commit-graph\nobjects/info/packs\nobjects/53/715b45364b160ce6e36d934be903459aebe254\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);